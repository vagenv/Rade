===============================================================================
===============================================================================


                                 Inventory


===============================================================================
===============================================================================

=================================================
   RItem Redesign?
=================================================

Remove Durability?

List of Interfaces for actions?
Map / Array of FStrings for content serialization and replication?
Will remove subclasses of structs, but will make Table creation harder?


Data:
ID
- Label
- Tooltip
- Icon
- Rarity
- Count
- MaxCount
- Weight
- Price
- Item
- ActionList: TArray<TSubclass<IRAction> >
- Map of additional data (Contain sub class data?)

IRAction_DestroyOnUse
IRAction_Equip

bool FREffectItem::Get (ItemData)
- TArray<TSoftClassPtr<URActiveStatusEffect> > ActiveEffects;

bool FREquipmentItem::Get (ItemData)
- EquipmentSlot
- StaticMesh
- SkeletalMesh
- CurrentDurability
- MaxDurability
- Resistence
- PassiveEffects
- RequiredStats

bool FRWeaponItem::Get (ItemData)
- Resistence
- PassiveEffects
- RequiredStats


Replication only for owner?
JsonData is a large FString member variable. Very expensive to replicate.



=================================================
         Weapons
=================================================

Track Equiped Item through unique inventory Ids?

Add UniqueId to ItemData?
- Differentiate Dublicates
- Equiped/busy?

Reuse equipment slot or subclass of equipment slot?
Single / double hand?

==============
WeaponItem : EquipmentItem
==============
- Attack Damage (Stat Scaling)
- AttackSpeed
- AnimStyle

List of effect on attack:
- Chances
- Active status effect [Burning] / [Poisoned] / [Slow] / [Haste]

==============
MeleeWeaponItem : WeaponItem
==============

==============
RangedWeaponItem : WeaponItem
==============
Ammo
- Current
- Total
- MagSize

==============
Weapons to Implement
==============
- Rifle
- Shotgun
- Launcher
- Sword
- Magic Staff / Wand
- Shield

==============
UI Weapon bar (Left bottom)
==============
Ranged
- Ammo
Melee
- Delay

===============================================================================
===============================================================================


                                 UI


===============================================================================
===============================================================================


Hide Status / Abilities if not in fight/use

=================================================
         Camera
=================================================
Texture Effects and Shake based on damage type


=================================================
         World Map
=================================================
Right Top Corner

Custom icons for
- NSWE
- Enemies
- Friends
- Pickups
- Interact


==============
Settings
==============
- Audio channels with Persistent Audio Settings
- Input mapping


=================================================
         Chat
=================================================
Uses same component as Damage, but with icons?

Emotions
- Icon / Emoji (Animation)
- Sound
- On top of player
- Character animation


=================================================
         Dialogue system
=================================================
Find Plugins

JSON / Graph workflow
UI
- Icon
- Header
- Message
- Select option


==============
UserWidgets Create/Destroy performance
==============
AddToViewport is expensive

Solution:
- Simplify Widgets
- Cache them

Create Widgets then Hide/Unhide
At least the status menu and other complex windows.

Create everthing in the beggining.
This will not affect gameplay framerate.
Sync load before game starts and keep alive

ResetWidget interface when visiblity changes


=================================================
         Health Bars
=================================================
Health/Stamina/Mana
- Smooth movement.
- Colors when increase (green) / decrease (red)


=================================================
         Teams
=================================================
List of Teams and their ID
Join / Switch between teams?
Damage / Status effect on Allies / Enemies


=================================================
         Store
=================================================
- Sell Items for gold
- Re-buy?


=================================================
         Crafting
=================================================
- Personal craft recipes.
- List of gathered recipes?


=================================================
      C++ RUI
=================================================
Look into focused again

Custom RUserWidget
- World center location
- Set Selected
- Replaced grid and list


=================================================
   Editor UI (Try again)
=================================================

https://unrealcommunity.wiki/customizing-details-amp-property-type-panel-tutorial-00deskro
https://github.com/NansPellicari/UE4-HowTo-DetailsPanelCustomization/
https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/Slate/DetailsCustomization/

==============
Custom Widget for:
==============

[FRItemData]
[Rarity] [Name] [RUI_Description] [Max Count] [Weight] [Price] [PickupMesh] [Pickup class]

[FRActionItemData]
[AutoDestroy] [Action class] [FRItemData]

[FRConsumableItemData]
[Effect List] [FRActionItemData]

[FREquipmentData]


[FRItemDataHandle]
[Table] [Item]  [<] x[Count] [>]






===============================================================================
===============================================================================
        

                           Battle system


===============================================================================
===============================================================================


=================================================
         Status
=================================================
MoveSpeed and Critical Substat used

Stamina/Mana/Health
- If used, stop restoring, and resume after N seconds.

==============
Hit Component Damage Multiplier
==============
ApplyRDamage (based on what body part was hit) (bone name?):
- Headshot
- Protected by armor


=================================================
         Combo manager
=================================================

Roll Invincibility?

Chain use abilities or attacks
- Jump => Double Jump
- Fireball => Fireball => FireNova
- Attack => Attack => Power Attack => Get Status Effect


==============
Combo / Style Rating
==============
Each anim style must have:
- Simple Attack
- Strong Attack
- Combo with damage multiplier
- DMC style E / D / C / B / A / S / SS / SSS damage multiplier
- Reset if recieved damage






===============================================================================
===============================================================================


                                Characters


===============================================================================
===============================================================================

=================================================
         Animation
=================================================

Partial body blend.
- Overlaps
- Lower body
- Upper body
- Head Movement with camera
- IK for hands to weapons attach sockets

Animations:
- Head animation. Look around (Camera rotation)
- Run/Sprint
- Ragdoll death
- Melee fight
- Roll/Phase (With Invincible Frame and Cost)


Smooth animations

Animation Blueprint (Network)


=================================================
         Face animation.
=================================================
With meshes
- Rig meshes
- Camera recording
- Universal
- Audio line to mouth movement.
- Expression

With texture
- Map EmotionID to Emotion Set
- Emotion set to list of images
- State machine?


========
Static mesh animation
========
Bunny mesh moving away from point and slowly disappearing.
Hop Animation with body deformation while in movement
Path finding


=================================================
         Enemy + AI
=================================================
Character
- Mesh
- Animation
- Material
- Attacks

AI
- Pathfinding
- Patrol
- Melee and ranged
- React if attacked
- Attack together
- Hide






===============================================================================
===============================================================================


                                 World


===============================================================================
===============================================================================

=================================================
         Outline
=================================================
OutLined overlap issue.

Colors
- White : Interact
- Gold  : Pickup
- Red   : Enemy

=================================================
         Shaders
=================================================
- Toon Shaders. From store?
- Test own version


=================================================
         Spline
=================================================
- Road
- Moving Snake
- Paricle effects


=================================================
         VFX
=================================================
Enemy Attack pulse notifier
- Red Aura for radial attack.
- Red Cone for directtional attack.

Enemy Death -> Bunny Explosion
- Puff
- Bunny Left
- Hops/Away

- Roll/Phase

- Blood
- Explosion
- Smoke
- GPU particles
- Niagara


=================================================
         Chaos System
=================================================
Destructable Level
- Trees
- Walls


=================================================
         Nanite and lumen
=================================================
- Load high detail models on demand
- Analyse budget, resource usage and disk read pattern


=================================================
   Level Transition.
=================================================
'Seamless' travel to next level (with other player)
- Mark Actors that will persist to the Transition Level
- Travel to the Transition Level
- Mark Actors that will persist to the Final Level
- Travel to the Final Level

- Posses / Unposses ?
- Hide / show pawn?
- Enable / Disable Input?





===============================================================================
===============================================================================


                           Map generation


===============================================================================
===============================================================================

- Deterministic Perlin Noise Map
- Level breaking and layering
- Forrest with random tree placement


=================================================
         Procedural Content
=================================================
Unreal Engine Procedural Content Generation
Level
Terrain
Buildings
Trees (With animation of wind)
Grass (With animation of wind)
Dynamic Time of Day


=================================================
         Instanced static mesh + Procedural Content
=================================================
Genrate PCG terrain
InstanceMesh->Add/Rm based on range

https://www.youtube.com/watch?v=XMKFTzfPqXs



===============================================================================
===============================================================================


                           Sound


===============================================================================
===============================================================================

=================================================
         UI
=================================================
Button clicked.
Selection changed
Menus opened/closed

=================================================
         Character
=================================================
- Jump / Land
- Running
- Attack
- Weapon Attack
- Getting hit
- Status effects
- Abilities

=================================================
         Environment
=================================================
- Explosion
- Forest
- Water






===============================================================================
===============================================================================


                           Online


===============================================================================
===============================================================================

=================================================
         Online
=================================================

Stress test low bandwidth and lagging.

Dedicated server instance build
- Linux / Windows
- Optimization

Deploy server to WPS

Database / storing user session
- Local Mysql for storing information?

External Network API
- For optional data.
- Authenticate
- Get User info


=================================================
         Epic / Steam / P2P
=================================================

Default:SubsystemNULL => Only LAN sessions
Find Pear to Pearn Unreal subsystem
Dedicated URL for management?

Look into Steam/Epic subsystems
- Register to API
- Connecting to user account


=================================================
         Online Subsystem Redesign
=================================================

==============
Lobby System
==============
Authenticate user before login
Client:
- Auth with Token Server and access token
- Connect to Game Server with token


==============
Game Server
==============
- A connection request with access token.
- Check with Token Server if token is valid
- Connect / kick user.

==============
Reconnect
==============
- Location
- Level
- Info
- Persistent data between sessions with PlayerId storing data

==============
GameMode
==============
- OnPostLogin.
- Pauseable
- ChangeName?






===============================================================================
===============================================================================


                           Other


===============================================================================
===============================================================================


=================================================
         Remove all float and int
=================================================
For now ok.

Others cases are not as a big of an issue because:
- Mostly whole decimal (0.1, 0.2) will encounter rounding error.
- float is enough precision for stats, except maybe 1M+ StatusValues

float -> double
int   -> int64


=================================================
         Graphics
=================================================
Set Graphics settings custom profiles.
- *.ini files
- Shadow range
- LOD distances


=================================================
         Random Equipment / Weapon Generation
=================================================
Blueprint function which generate Weapon/Equipment randomly. With schema.
- Price
- Rarity
- Effect
- Color


=================================================
         Balancing
=================================================
Folder with all curves;
- Items link them
- Can be updated from JSON / CSV


=================================================
         Validation
=================================================
Blueprint validation scripts
- Item Table validation
- Blueprint naming scheme validation






===============================================================================
===============================================================================



                              Game Design



===============================================================================
===============================================================================

==============
Character Status Effects
==============
Stagger
- Flash white
- Cancel Anim/Attack
- Push back.
- Flashing effect.

Stun
- Flash yellow
- No action for N seconds
- Can't Anim?

Bleed? (Too graphic?)
- Flash red
- % Health drain
- No regen?
- Blood trail?

Poison
- Flash green
- Flat Health drain
- No regen?

Burn
- Flash orange
- % Health drain
- Stagger ever few seconds

Frozen
- Flash blue
- Flat Health drain
- Slow status effect


==============
Attack types
==============
- Melee / Ranged
- Guns
- Attack combo
- Spells. Instant + Casting
- Environment
- Turrents / Towers
- Ally NPCs


==============
Battles
==============
- Many enemies
- Spawn in waves
- Defend checkpoint
- Buy upgrades
- Hire more NPCs and upgrade them.
- Select team


==============
Events
==============
Random Events to protect Village from attacks.
Another Player can be summoned for help


==============
Random Content
==============
- Item quality affects strength of effects?
- Equipment stats/effect
- Weapon stats/effects
- Level?



==============
Character Classes
==============
Class tree reqirnment?
- Stats?
- Levels?

Warrior (StrongBoi)
- Berserk (AngryBoi/BonkBoi) (big weapon)
- BladeMaster (FightBoi) (Dual Weapons)
- Guardian/Tank (ThiccBoi) (Shield, Pusher, Absorb dmg then return)

Rougue (FastBoi)
- Assassin (KnifeBoi) (daggers)
- Ranger (FarBoi) (bows, crossbows, slings)
- Gunslinger (GunBoi/Boneslinger) (Pistols, Shotguns, Rockets)

Mage (SmartBoi)
- Wizard (MagicBoi) (Spells)
- Warlock (PainBoi) (Curses)
- Summoner (PartyBoi/ClubBoi) (Skeletons / Ghosts)

=================================================